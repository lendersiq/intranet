/* ==== RESET & BASE ==== */
* { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body {
    color: #333;
    transition: background 0.3s;
    position: relative;
}

/* ==== DARK MODE ==== */
body.dark { color:#eee; }
body.dark .top-bar { background:#1a1a1a; }
body.dark .card { background:rgba(40,40,40,0.9); border-color:#444; }
body.dark .card h3 { color:#fff; }
body.dark .subcard { background:rgba(50,50,50,0.95); }
body.dark .subcard:hover { background:#444; }
body.dark .subgrid { background:rgba(0,0,0,0.15); }

/* ==== TOP BAR ==== */
.top-bar {
    position:sticky; top:0; z-index:100;
    display:flex; align-items:center; justify-content:space-between;
    padding:0.7rem 1.2rem;
    background:rgba(255,255,255,0.92);
    backdrop-filter:blur(8px);
    box-shadow:0 2px 8px rgba(0,0,0,.1);
}
.logo { font-weight:700; font-size:1.3rem; }
.search-box { position:relative; flex:1; max-width:380px; margin:0 1rem; }
.search-box input {
    width:100%; padding:0.55rem 2rem 0.55rem 0.7rem;
    border:1px solid #ccc; border-radius:6px;
    font-size:0.9rem;
}
.search-box i { position:absolute; right:0.7rem; top:50%; transform:translateY(-50%); color:#777; }
#darkModeToggle { background:none; border:none; font-size:1.2rem; cursor:pointer; }

/* ==== GRID (TIGHT SPACING) ==== */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1.2rem;               /* ← Reduced from 1.2rem */
    padding: 1.2rem;           /* ← Reduced from 2rem */
    max-width: 1500px;
    margin: 0 auto;
    position: relative;
    /* min-height: 100vh; */
}

/* ==== CARD (COMPACT & TIGHT) ==== */
.card {
    background:rgba(255,255,255,0.92);
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 3px 10px rgba(0,0,0,.1);
    transition: all 0.25s ease;
    cursor:pointer;
    height: 85px;              /* ← Slightly shorter */
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
}
.card:hover { 
    transform:translateY(-2px); 
    box-shadow:0 6px 16px rgba(0,0,0,.15); 
}
.card .icon {
    height:34px; 
    display:flex; 
    align-items:center; 
    justify-content:center;
    font-size:1.4rem; 
    color:#fff;
    position: relative;
}
.card h3 { 
    padding:0.35rem 0.75rem 0.15rem; 
    font-size:0.95rem; 
    margin:0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.card p { 
    padding:0 0.75rem 0.5rem; 
    font-size:0.78rem; 
    color:#666; 
    flex:1; 
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Color coding */
.card.saas .icon { background:#4caf50; }
.card.google .icon { background:#4285f4; }
.card.media .icon { background:#e91e63; }
.card.news .icon { background:#ff9800; }
.card.app .icon { background:#9c27b0; }
.card.rates .icon { background:#c9a02c; }
.card.learning .icon { background:#003366; }
.card.smart .icon { background:#87CEEB; }
.card.dashboard .icon { background:#6A5ACD; }
.card.policy .icon { background:#607D8B; }
.card.folder .icon { background:#FF8C00; }

/* ==== EXPANDED FOLDER CARD ==== */
.card.folder.expanded {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 1100px;
    max-height: 80vh;
    overflow-y: auto;
    z-index: 1000;
    border-radius: 14px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    animation: popIn 0.3s ease-out;
    height: auto;
    min-height: 120px;
}
@keyframes popIn {
    from { transform: translate(-50%, -50%) scale(0.92); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

/* Dim others */
.grid:has(.card.folder.expanded) .card:not(.expanded) {
    opacity: 0.4;
    pointer-events: none;
    transition: opacity 0.3s;
}

/* ==== SUBGRID (TIGHT) ==== */
.subgrid {
    display: none;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 0.7rem;               /* ← Reduced from 1rem */
    padding: 0.9rem;           /* ← Reduced from 1.2rem */
    background: rgba(0,0,0,0.05);
    border-top: 1px dashed #ccc;
}
.subgrid.show {
    display: grid !important;
}

/* ==== SUBCARD (TIGHT) ==== */
.subcard {
    background: rgba(255,255,255,0.95);
    border-radius: 8px;
    padding: 0.6rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.2s ease;
    cursor: pointer;
    height: 65px;              /* ← Reduced from 70px */
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.subcard:hover {
    background: #fff;
    transform: translateY(-1px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.subcard > div {
    display: flex;
    align-items: center;
    gap: 7px;
}
.subcard i {
    font-size: 1.05rem;
}
.subcard strong {
    font-size: 0.88rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ==== FOLDER CHEVRON ==== */
.card.folder .icon::after {
    content: "\f078";
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    position: absolute;
    right: 10px;
    font-size: 0.85rem;
    color: #fff;
    transition: transform 0.3s ease;
}
.card.folder.expanded .icon::after {
    transform: rotate(180deg);
}

/* ==== MODAL ==== */
.modal {
    display:none; 
    position:fixed; inset:0;
    background:rgba(0,0,0,.7); 
    align-items:center; 
    justify-content:center;
    z-index:200;
}
.modal-content {
    position:relative; 
    background:#fff; 
    border-radius:12px;
    max-width:90%; 
    max-height:90%; 
    overflow:hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
.modal-content video { width:100%; height:auto; }
.close {
    position:absolute; top:10px; right:14px;
    font-size:1.8rem; color:#fff; cursor:pointer;
    background: rgba(0,0,0,0.5);
    width: 32px; height: 32px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
}
.close:hover { background: rgba(0,0,0,0.8); }

/* ==== RESPONSIVE (TIGHT) ==== */
@media (max-width:600px) {
    .grid { 
        grid-template-columns:1fr; 
        padding:1rem; 
        gap: 0.6rem;           /* ← Tighter on mobile */
    }
    .top-bar { 
        flex-direction:column; 
        gap:0.4rem; 
        padding:0.7rem;
    }
    .search-box { max-width:none; margin:0; }
    .card { height: 80px; }
    .card .icon { height: 30px; font-size: 1.3rem; }
    .card h3 { font-size: 0.92rem; padding: 0.3rem 0.7rem; }
    .card p { font-size: 0.73rem; padding: 0 0.7rem 0.45rem; }
    .card.folder.expanded { width: 95%; max-height: 82vh; }
}